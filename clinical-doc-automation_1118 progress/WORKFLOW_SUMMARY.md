# è‡ªå‹•åŒ–å·¥ä½œæµç¨‹ç¸½çµ

## è‡¨åºŠè©¦é©—æ–‡ä»¶è‡ªå‹•åŒ– - ç³»çµ±æ¶æ§‹èˆ‡å·¥ä½œæµç¨‹

---

## ğŸ“Š ç³»çµ±æ¶æ§‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è¼¸å…¥ï¼šProtocol PDF                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ClinicalDocAutomation ä¸»æ§åˆ¶å™¨                        â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ­¥é©Ÿ 1: Protocol è§£æ (ProtocolParser)                   â”‚   â”‚
â”‚  â”‚  - ä½¿ç”¨ pdfplumber æå– PDF æ–‡æœ¬                          â”‚   â”‚
â”‚  â”‚  - ä½¿ç”¨ Gemini AI æ™ºèƒ½æå–çµæ§‹åŒ–è³‡è¨Š                       â”‚   â”‚
â”‚  â”‚  - è¼¸å‡ºï¼šprotocol_info.json                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                   â”‚                                              â”‚
â”‚                   â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ­¥é©Ÿ 2: CRF ç”Ÿæˆ (CRFGenerator)                          â”‚   â”‚
â”‚  â”‚  - åŸºæ–¼ Protocol è³‡è¨Šé¸æ“‡ CRF é ˜åŸŸ                        â”‚   â”‚
â”‚  â”‚  - ç”Ÿæˆæ¨™æº– CDISC é ˜åŸŸè¡¨å–®                                â”‚   â”‚
â”‚  â”‚  - æ·»åŠ ç·¨ç¢¼æŒ‡å¼•                                            â”‚   â”‚
â”‚  â”‚  - è¼¸å‡ºï¼šCRF_xxx.docx                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                   â”‚                                              â”‚
â”‚                   â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ­¥é©Ÿ 3: DVP ç”Ÿæˆ (DVPGenerator)                          â”‚   â”‚
â”‚  â”‚  - ç”Ÿæˆç¯„åœæª¢æŸ¥è¦å‰‡                                        â”‚   â”‚
â”‚  â”‚  - ç”Ÿæˆå¿…å¡«æ¬„ä½é©—è­‰                                        â”‚   â”‚
â”‚  â”‚  - ç”Ÿæˆé‚è¼¯ä¸€è‡´æ€§æª¢æŸ¥                                      â”‚   â”‚
â”‚  â”‚  - ç”Ÿæˆæ—¥æœŸä¸€è‡´æ€§æª¢æŸ¥                                      â”‚   â”‚
â”‚  â”‚  - è¼¸å‡ºï¼šDVP_xxx.docx                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                   â”‚                                              â”‚
â”‚                   â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ­¥é©Ÿ 4: User Guide ç”Ÿæˆ (UserGuideGenerator)             â”‚   â”‚
â”‚  â”‚  - ç”Ÿæˆç³»çµ±è¨ªå•èªªæ˜                                        â”‚   â”‚
â”‚  â”‚  - ç”Ÿæˆå°èˆªæŒ‡å¼•                                            â”‚   â”‚
â”‚  â”‚  - ç”Ÿæˆæ•¸æ“šè¼¸å…¥èªªæ˜ï¼ˆé‡å°æ¯å€‹ CRFï¼‰                        â”‚   â”‚
â”‚  â”‚  - ç”Ÿæˆ Query ç®¡ç†èªªæ˜                                    â”‚   â”‚
â”‚  â”‚  - ç”Ÿæˆå ±å‘Šç”Ÿæˆèªªæ˜                                        â”‚   â”‚
â”‚  â”‚  - è¼¸å‡ºï¼šUserGuide_xxx.docx, Screenshots.txt              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                   â”‚                                              â”‚
â”‚                   â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ­¥é©Ÿ 5: å ±å‘Šç”Ÿæˆ                                          â”‚   â”‚
â”‚  â”‚  - ç”ŸæˆåŸ·è¡Œçµ±è¨ˆ                                            â”‚   â”‚
â”‚  â”‚  - è¨˜éŒ„ä»»å‹™ç‹€æ…‹                                            â”‚   â”‚
â”‚  â”‚  - åˆ—å‡ºç”Ÿæˆçš„æª”æ¡ˆ                                          â”‚   â”‚
â”‚  â”‚  - è¨˜éŒ„éŒ¯èª¤å’Œè­¦å‘Š                                          â”‚   â”‚
â”‚  â”‚  - è¼¸å‡ºï¼šautomation_report.json, .txt                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      è¼¸å‡ºç›®éŒ„çµæ§‹                                  â”‚
â”‚                                                                   â”‚
â”‚  output_PROTOCOL-001_20251118_120000/                           â”‚
â”‚  â”œâ”€â”€ protocol_info.json         â† Protocol è§£æçµæœ              â”‚
â”‚  â”œâ”€â”€ CRF_PROTOCOL-001.docx      â† Case Report Form              â”‚
â”‚  â”œâ”€â”€ DVP_PROTOCOL-001.docx      â† Data Validation Plan          â”‚
â”‚  â”œâ”€â”€ UserGuide_PROTOCOL-001.docx â† EDC/ePRO User Guide          â”‚
â”‚  â”œâ”€â”€ UserGuide_Screenshots.txt  â† æˆªåœ–éœ€æ±‚æ¸…å–®                   â”‚
â”‚  â”œâ”€â”€ automation.log              â† è©³ç´°åŸ·è¡Œæ—¥èªŒ                   â”‚
â”‚  â”œâ”€â”€ automation_report.json     â† çµæ§‹åŒ–å ±å‘Š                     â”‚
â”‚  â”œâ”€â”€ automation_report.txt      â† äººé¡å¯è®€å ±å‘Š                   â”‚
â”‚  â””â”€â”€ _backup/                    â† å‚™ä»½ç›®éŒ„ï¼ˆå¦‚å•Ÿç”¨ï¼‰             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ å·¥ä½œæµç¨‹è©³è§£

### éšæ®µ 1: Protocol è§£æ

**ä½¿ç”¨æ¨¡çµ„**: `modules/protocol_parser.py`

**è™•ç†æµç¨‹**:
1. ä½¿ç”¨ `pdfplumber` è®€å– PDF æª”æ¡ˆ
2. æå–æ–‡æœ¬å…§å®¹ï¼ˆæ”¯æ´åˆ†é è®€å–ï¼‰
3. æ§‹å»ºæ™ºèƒ½æç¤ºè© (Prompt)
4. èª¿ç”¨ Gemini API é€²è¡Œçµæ§‹åŒ–æå–
5. è§£æ JSON å›æ‡‰
6. å‰µå»º `ProtocolInfo` ç‰©ä»¶
7. ä¿å­˜ç‚º JSON æª”æ¡ˆ

**æå–çš„è³‡è¨Š**:
- è©¦é©—æ¨™é¡Œ (study_title)
- Protocol ç·¨è™Ÿ (protocol_number)
- è´ŠåŠ©å•† (sponsor)
- è©¦é©—éšæ®µ (phase)
- è©¦é©—è¨­è¨ˆ (study_design)
- ç›®æ¨™æ—ç¾¤ (target_population)
- æ¨£æœ¬æ•¸ (sample_size)
- è¨ªè¦–æ™‚ç¨‹ (visit_schedule)
- ä¸»è¦çµ‚é» (primary_endpoints)
- æ¬¡è¦çµ‚é» (secondary_endpoints)
- ç´å…¥æ¨™æº– (inclusion_criteria)
- æ’é™¤æ¨™æº– (exclusion_criteria)
- CRF é ˜åŸŸ (crf_domains)

### éšæ®µ 2: CRF ç”Ÿæˆ

**ä½¿ç”¨æ¨¡çµ„**: `modules/crf_generator.py`

**è™•ç†æµç¨‹**:
1. æ¥æ”¶ Protocol è³‡è¨Š
2. ç¢ºå®šéœ€è¦çš„ CRF é ˜åŸŸ
3. ç‚ºæ¯å€‹é ˜åŸŸç”Ÿæˆè¡¨å–®ï¼š
   - é ˜åŸŸæ¨™é¡Œå’Œæè¿°
   - æ¬„ä½å®šç¾©è¡¨æ ¼
   - ç·¨ç¢¼æŒ‡å¼•
4. æ‡‰ç”¨æ ¼å¼æ¨£å¼
5. ç”Ÿæˆ Word æ–‡ä»¶

**æ¨™æº– CRF é ˜åŸŸ**:
- Demographics (äººå£å­¸è³‡æ–™)
- Medical History (ç—…å²)
- Vital Signs (ç”Ÿå‘½å¾µè±¡)
- Laboratory Tests (å¯¦é©—å®¤æª¢æŸ¥)
- Adverse Events (ä¸è‰¯äº‹ä»¶)
- Concomitant Medications (ä½µç”¨è—¥ç‰©)
- Study Drug Administration (è©¦é©—è—¥ç‰©ç®¡ç†)

### éšæ®µ 3: DVP ç”Ÿæˆ

**ä½¿ç”¨æ¨¡çµ„**: `modules/dvp_generator.py`

**è™•ç†æµç¨‹**:
1. æ¥æ”¶ Protocol è³‡è¨Šå’Œ CRF æ¬„ä½å®šç¾©
2. ç”Ÿæˆå„é¡é©—è­‰è¦å‰‡ï¼š
   - å¿…å¡«æ¬„ä½æª¢æŸ¥ (Required Field)
   - ç¯„åœæª¢æŸ¥ (Range Check)
   - æ—¥æœŸä¸€è‡´æ€§ (Date Consistency)
   - é‚è¼¯æª¢æŸ¥ (Logical Check)
   - è·¨è¡¨å–®é©—è­‰ (Cross-Form)
   - Protocol åå·®æª¢æŸ¥ (Protocol Deviation)
3. ç‚ºæ¯å€‹è¦å‰‡è¨­å®šï¼š
   - è¦å‰‡ ID
   - æè¿°
   - åš´é‡ç¨‹åº¦ (Critical/Major/Minor)
   - Query æ–‡æœ¬
4. ç”Ÿæˆ Word æ–‡ä»¶

**é©—è­‰è¦å‰‡é¡å‹**:
- **Critical**: å¿…é ˆç«‹å³è§£æ±ºï¼Œå¯èƒ½å½±éŸ¿å—è©¦è€…å®‰å…¨æˆ–æ•¸æ“šå®Œæ•´æ€§
- **Major**: é‡è¦å•é¡Œï¼Œæ‡‰åŠæ™‚è™•ç†ï¼Œå¯èƒ½å½±éŸ¿æ•¸æ“šå“è³ª
- **Minor**: æ‡‰å¯©æŸ¥çš„å•é¡Œï¼Œå°æ•¸æ“šå“è³ªå½±éŸ¿è¼ƒå°

### éšæ®µ 4: User Guide ç”Ÿæˆ

**ä½¿ç”¨æ¨¡çµ„**: `modules/user_guide_generator.py`

**è™•ç†æµç¨‹**:
1. æ¥æ”¶ Protocol å’Œ CRF è¨­è¨ˆè³‡è¨Š
2. ç”Ÿæˆå„å€‹ç« ç¯€ï¼š
   - å°é¢é 
   - ç°¡ä»‹
   - ç³»çµ±è¨ªå•
   - å°èˆªèªªæ˜
   - æ•¸æ“šè¼¸å…¥æŒ‡å¼•ï¼ˆé‡å°æ¯å€‹ CRFï¼‰
   - Query ç®¡ç†
   - å ±å‘Šç”Ÿæˆ
   - é™„éŒ„
3. æ’å…¥æˆªåœ–ä½”ä½ç¬¦
4. ç”Ÿæˆæˆªåœ–éœ€æ±‚æ¸…å–®
5. ç”Ÿæˆ Word æ–‡ä»¶

**User Guide ç« ç¯€**:
1. Introduction (ç°¡ä»‹)
2. System Access (ç³»çµ±è¨ªå•)
3. System Navigation (ç³»çµ±å°èˆª)
4. Data Entry Instructions (æ•¸æ“šè¼¸å…¥èªªæ˜)
5. Query Management (Query ç®¡ç†)
6. Report Generation (å ±å‘Šç”Ÿæˆ)
7. Appendix (é™„éŒ„)

### éšæ®µ 5: å ±å‘Šç”Ÿæˆ

**ç”Ÿæˆå…§å®¹**:
1. **JSON å ±å‘Š** - çµæ§‹åŒ–æ•¸æ“šï¼Œå¯ç”¨æ–¼ï¼š
   - API æ•´åˆ
   - æ•¸æ“šåˆ†æ
   - è‡ªå‹•åŒ–è™•ç†

2. **æ–‡å­—å ±å‘Š** - äººé¡å¯è®€æ ¼å¼ï¼ŒåŒ…å«ï¼š
   - åŸºæœ¬è³‡è¨Š
   - Protocol è³‡è¨Š
   - åŸ·è¡Œçµ±è¨ˆ
   - ä»»å‹™è©³æƒ…
   - ç”Ÿæˆçš„æª”æ¡ˆåˆ—è¡¨
   - éŒ¯èª¤åˆ—è¡¨

---

## ğŸ¯ æ ¸å¿ƒé¡åˆ¥å’Œæ–¹æ³•

### ClinicalDocAutomation é¡åˆ¥

```python
class ClinicalDocAutomation:
    def __init__(
        self,
        protocol_pdf: str,
        api_key: str,
        output_dir: Optional[str] = None,
        verbose: bool = False,
        backup: bool = True
    )

    def parse_protocol(self) -> bool
    def generate_crf(self) -> bool
    def generate_dvp(self) -> bool
    def generate_user_guide(self) -> bool
    def generate_dmp(self) -> bool  # å°šæœªå¯¦ç¾
    def generate_final_report(self) -> str
    def run_all(self, generate_types: Optional[List[str]] = None) -> AutomationReport
```

### BatchProcessor é¡åˆ¥

```python
class BatchProcessor:
    def __init__(
        self,
        api_key: str,
        output_base_dir: Optional[str] = None,
        verbose: bool = False
    )

    def process_protocols(
        self,
        protocol_pdfs: List[str],
        generate_types: Optional[List[str]] = None
    ) -> List[Tuple[str, AutomationReport]]
```

---

## ğŸ“ˆ åŸ·è¡Œæµç¨‹æ™‚åºåœ–

```
ä½¿ç”¨è€…          è‡ªå‹•åŒ–ç³»çµ±         Protocolè§£æå™¨    CRFç”Ÿæˆå™¨    DVPç”Ÿæˆå™¨    UserGuideç”Ÿæˆå™¨
  â”‚                 â”‚                  â”‚              â”‚            â”‚              â”‚
  â”‚â”€â”€åŸ·è¡Œå‘½ä»¤â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚              â”‚            â”‚              â”‚
  â”‚                 â”‚                  â”‚              â”‚            â”‚              â”‚
  â”‚                 â”‚â”€â”€è§£æProtocolâ”€â”€â”€>â”‚              â”‚            â”‚              â”‚
  â”‚                 â”‚                  â”‚              â”‚            â”‚              â”‚
  â”‚                 â”‚<â”€è¿”å›è³‡è¨Šâ”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚            â”‚              â”‚
  â”‚                 â”‚                  â”‚              â”‚            â”‚              â”‚
  â”‚                 â”‚â”€â”€ç”ŸæˆCRFâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚            â”‚              â”‚
  â”‚                 â”‚                  â”‚              â”‚            â”‚              â”‚
  â”‚                 â”‚<â”€è¿”å›CRFæ–‡ä»¶â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚            â”‚              â”‚
  â”‚                 â”‚                  â”‚              â”‚            â”‚              â”‚
  â”‚                 â”‚â”€â”€ç”ŸæˆDVPâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚              â”‚
  â”‚                 â”‚                  â”‚              â”‚            â”‚              â”‚
  â”‚                 â”‚<â”€è¿”å›DVPæ–‡ä»¶â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚
  â”‚                 â”‚                  â”‚              â”‚            â”‚              â”‚
  â”‚                 â”‚â”€â”€ç”ŸæˆUserGuideâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                 â”‚                  â”‚              â”‚            â”‚              â”‚
  â”‚                 â”‚<â”€è¿”å›UserGuideâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                 â”‚                  â”‚              â”‚            â”‚              â”‚
  â”‚                 â”‚â”€â”€ç”Ÿæˆå ±å‘Šâ”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚            â”‚              â”‚
  â”‚                 â”‚                  â”‚              â”‚            â”‚              â”‚
  â”‚<â”€â”€è¿”å›å ±å‘Šâ”€â”€â”€â”€â”€â”€â”‚                  â”‚              â”‚            â”‚              â”‚
  â”‚                 â”‚                  â”‚              â”‚            â”‚              â”‚
```

---

## ğŸ”’ éŒ¯èª¤è™•ç†æ©Ÿåˆ¶

### 1. ä»»å‹™ç´šåˆ¥éŒ¯èª¤è™•ç†

æ¯å€‹ä»»å‹™ï¼ˆè§£æã€ç”Ÿæˆï¼‰éƒ½æœ‰ç¨ç«‹çš„éŒ¯èª¤è™•ç†ï¼š

```python
try:
    # åŸ·è¡Œä»»å‹™
    result = self.generate_crf()
except Exception as e:
    # è¨˜éŒ„éŒ¯èª¤
    self.logger.error(f"CRF ç”Ÿæˆå¤±æ•—: {str(e)}")
    # æ›´æ–°ä»»å‹™ç‹€æ…‹
    task.status = 'failed'
    task.error_message = str(e)
    # ç¹¼çºŒåŸ·è¡Œå…¶ä»–ä»»å‹™
    continue
```

### 2. å‚™ä»½æ©Ÿåˆ¶

```python
# å•Ÿç”¨å‚™ä»½æ™‚ï¼Œåœ¨æª”æ¡ˆç”Ÿæˆå‰å‰µå»ºå‚™ä»½
if self.backup_enabled:
    self._create_backup(file_path)
```

### 3. å›æ»¾æ©Ÿåˆ¶

- ä»»å‹™å¤±æ•—ä¸å½±éŸ¿å…¶ä»–ä»»å‹™
- å·²ç”Ÿæˆçš„æª”æ¡ˆä¿ç•™åœ¨è¼¸å‡ºç›®éŒ„
- å‚™ä»½ç›®éŒ„ä¿å­˜å¤±æ•—å‰çš„ç‹€æ…‹
- è©³ç´°æ—¥èªŒè¨˜éŒ„æ‰€æœ‰æ“ä½œ

---

## ğŸ“Š æ•ˆèƒ½è€ƒé‡

### æ™‚é–“ä¼°ç®—

å…¸å‹çš„ Protocolï¼ˆ50-100é ï¼‰ï¼š

| éšæ®µ | é ä¼°æ™‚é–“ | ä¸»è¦è€—æ™‚ |
|------|---------|---------|
| Protocol è§£æ | 2-3 åˆ†é˜ | Gemini API èª¿ç”¨ |
| CRF ç”Ÿæˆ | 1-2 åˆ†é˜ | Word æ–‡ä»¶ç”Ÿæˆ |
| DVP ç”Ÿæˆ | 1-2 åˆ†é˜ | è¦å‰‡ç”Ÿæˆå’Œæ–‡ä»¶å‰µå»º |
| User Guide ç”Ÿæˆ | 2-3 åˆ†é˜ | å¤šç« ç¯€æ–‡ä»¶ç”Ÿæˆ |
| å ±å‘Šç”Ÿæˆ | <1 åˆ†é˜ | JSON/æ–‡å­—å¯«å…¥ |
| **ç¸½è¨ˆ** | **7-11 åˆ†é˜** | |

### å„ªåŒ–å»ºè­°

1. **Protocol å¤ªå¤§æ™‚**:
   - ä½¿ç”¨ `max_pages` åƒæ•¸é™åˆ¶è§£æé æ•¸
   - åªè§£æé—œéµç« ç¯€

2. **æ‰¹æ¬¡è™•ç†æ™‚**:
   - åˆ†æ‰¹åŸ·è¡Œï¼ˆå»ºè­°æ¯æ‰¹ 5-10 å€‹ï¼‰
   - æ³¨æ„ API é…é¡é™åˆ¶
   - è€ƒæ…®åœ¨éå°–å³°æ™‚æ®µåŸ·è¡Œ

3. **ç¶²è·¯å„ªåŒ–**:
   - ç¢ºä¿ç©©å®šçš„ç¶²è·¯é€£æ¥
   - ä½¿ç”¨æœ¬åœ°ç·©å­˜ï¼ˆå¦‚æœ API æ”¯æ´ï¼‰

---

## ğŸ”Œ æ“´å±•æ€§

### 1. æ·»åŠ æ–°çš„æ–‡ä»¶ç”Ÿæˆå™¨

```python
def generate_custom_document(self) -> bool:
    """ç”Ÿæˆè‡ªè¨‚æ–‡ä»¶"""
    task = GenerationTask(
        task_id="generate_custom",
        task_type="custom"
    )
    self.report.tasks.append(task)

    try:
        self._update_task_status(task, 'running')

        # å¯¦ç¾ç”Ÿæˆé‚è¼¯
        # ...

        self._update_task_status(task, 'completed', output_path)
        return True

    except Exception as e:
        self._update_task_status(task, 'failed', error_message=str(e))
        return False
```

### 2. è‡ªè¨‚ Protocol è§£æé‚è¼¯

```python
# åœ¨ ProtocolParser ä¸­æ·»åŠ è‡ªè¨‚æ¬„ä½
custom_fields = ['custom_field_1', 'custom_field_2']

# ä¿®æ”¹æç¤ºè©ä»¥æå–é¡å¤–è³‡è¨Š
```

### 3. æ•´åˆåˆ°ç¾æœ‰ç³»çµ±

```python
# REST API ç¯„ä¾‹
from fastapi import FastAPI
from automation_workflow import ClinicalDocAutomation

app = FastAPI()

@app.post("/api/generate")
async def generate_documents(request: GenerateRequest):
    automation = ClinicalDocAutomation(
        protocol_pdf=request.pdf_path,
        api_key=request.api_key
    )
    report = automation.run_all()
    return report.to_dict()
```

---

## ğŸ“š ç›¸é—œæ–‡ä»¶

- [å®Œæ•´ä½¿ç”¨èªªæ˜](AUTOMATION_WORKFLOW_README.md)
- [å¿«é€Ÿé–‹å§‹æŒ‡å—](QUICKSTART_AUTOMATION.md)
- [ä½¿ç”¨ç¯„ä¾‹](examples/automation_example.py)
- [Protocol Parser æ–‡æª”](PROTOCOL_PARSER_SUMMARY.md)
- [CRF Generator æ–‡æª”](CRF_GENERATOR_SUMMARY.md)
- [DVP Generator æ–‡æª”](DVP_MODULE_SUMMARY.md)
- [User Guide Generator æ–‡æª”](USER_GUIDE_GENERATOR_SUMMARY.txt)

---

## ğŸ¯ æœ€ä½³å¯¦è¸

1. **é–‹å§‹å‰**:
   - ç¢ºèª Protocol PDF å®Œæ•´ä¸”æ¸…æ™°
   - è¨­ç½®ç’°å¢ƒè®Šæ•¸ä»¥ä¿è­· API Key
   - æª¢æŸ¥ç¶²è·¯é€£æ¥

2. **åŸ·è¡Œæ™‚**:
   - ä½¿ç”¨ verbose æ¨¡å¼ç›£æ§é€²åº¦
   - ä¿ç•™æ—¥èªŒæª”æ¡ˆä»¥ä¾›é™¤éŒ¯
   - å®šæœŸæª¢æŸ¥ API é…é¡

3. **åŸ·è¡Œå¾Œ**:
   - å¯©æŸ¥ç”Ÿæˆçš„æ–‡ä»¶
   - æª¢æŸ¥åŸ·è¡Œå ±å‘Š
   - ä¿å­˜è¼¸å‡ºç›®éŒ„ä»¥ä¾›åƒè€ƒ

4. **æ‰¹æ¬¡è™•ç†**:
   - å…ˆæ¸¬è©¦å–®å€‹ Protocol
   - åˆ†æ‰¹åŸ·è¡Œå¤§é‡ Protocol
   - ç›£æ§ç³»çµ±è³‡æºä½¿ç”¨

---

**ç‰ˆæœ¬**: 1.0
**æ—¥æœŸ**: 2025-11-18
**ä½œè€…**: Clinical Documentation Automation Team

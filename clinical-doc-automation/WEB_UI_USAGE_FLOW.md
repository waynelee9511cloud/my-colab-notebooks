# Web UI 使用流程圖

## 📊 完整使用流程

```
┌─────────────────────────────────────────────────────────────┐
│                    啟動 Web UI                                │
│                                                               │
│  選項 1: Google Colab                                         │
│  └─> 開啟 Web_UI_Demo.ipynb                                  │
│  └─> 執行啟動儲存格                                           │
│  └─> 點擊公開連結                                             │
│                                                               │
│  選項 2: 本地環境 (Windows)                                   │
│  └─> 雙擊 launch_web_ui.bat                                  │
│  └─> 開啟 http://localhost:7860                              │
│                                                               │
│  選項 3: 本地環境 (Mac/Linux)                                 │
│  └─> 執行 ./launch_web_ui.sh                                 │
│  └─> 開啟 http://localhost:7860                              │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│               步驟 1: 設定 API Key                            │
│                                                               │
│  1. 訪問 https://makersuite.google.com/app/apikey            │
│  2. 登入並創建 API Key                                        │
│  3. 在 Web UI 中輸入 API Key                                  │
│  4. 點擊「設定 API Key」                                      │
│  5. 確認顯示 ✅ 成功訊息                                      │
│                                                               │
│  ⏱️ 時間: 約 1 分鐘（首次）                                   │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│               步驟 2: 上傳檔案                                │
│                                                               │
│  必填:                                                        │
│  ├─> 上傳 Protocol PDF                                       │
│  └─> 等待上傳完成 (✅)                                        │
│                                                               │
│  選填:                                                        │
│  ├─> 上傳公司 Logo (PNG/JPG)                                 │
│  └─> 等待上傳完成 (✅)                                        │
│                                                               │
│  ⏱️ 時間: 10-30 秒                                            │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│            步驟 3: 解析 Protocol                              │
│                                                               │
│  1. 點擊「開始解析 Protocol」                                 │
│  2. 等待 AI 分析（進度條顯示）                                │
│     ├─> 初始化解析器...                                       │
│     ├─> 讀取 PDF 文本...                                      │
│     ├─> AI 分析中（30-60 秒）...                              │
│     └─> 整理結果...                                           │
│  3. 查看 JSON 編輯器中的提取資訊                              │
│  4. 確認顯示 ✅ 解析完成訊息                                  │
│                                                               │
│  提取的資訊包括:                                              │
│  • 試驗標題和編號                                             │
│  • 贊助商、階段、設計                                         │
│  • 訪視時程                                                   │
│  • 終點指標                                                   │
│  • 納入/排除標準                                              │
│  • CRF 領域                                                   │
│                                                               │
│  ⏱️ 時間: 30-60 秒                                            │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│         步驟 4: 編輯資訊（可選）                              │
│                                                               │
│  1. 在 JSON 編輯器中檢查提取的資訊                            │
│  2. 修改不準確或缺失的欄位                                    │
│     • study_title: "試驗標題"                                 │
│     • protocol_number: "Protocol 編號"                        │
│     • visit_schedule: ["訪視1", "訪視2", ...]                │
│     • 等等                                                    │
│  3. 點擊「更新資訊」                                          │
│  4. 確認顯示 ✅ 更新成功訊息                                  │
│                                                               │
│  💡 提示: 確保 JSON 格式正確                                  │
│                                                               │
│  ⏱️ 時間: 視需要而定（0-5 分鐘）                              │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│          步驟 5: 選擇文件類型                                 │
│                                                               │
│  勾選要生成的文件類型:                                        │
│                                                               │
│  ☐ CRF (病例報告表)                                          │
│     • 用於收集臨床試驗資料                                    │
│     • 基於訪視時程和終點指標                                  │
│                                                               │
│  ☐ DVP (資料驗證計劃)                                        │
│     • 定義資料驗證規則                                        │
│     • 確保資料品質                                            │
│                                                               │
│  ☐ User Guide (使用者指南)                                   │
│     • EDC 系統使用手冊                                        │
│     • 詳細操作步驟                                            │
│                                                               │
│  ☐ DMP (資料管理計劃)                                        │
│     • 資料管理策略和流程                                      │
│     • 符合 GCP 規範                                           │
│                                                               │
│  💡 可多選，建議一次生成所有需要的文件                        │
│                                                               │
│  ⏱️ 時間: 5 秒                                                │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│           步驟 6: 生成並下載                                  │
│                                                               │
│  1. 點擊「一鍵生成文件」                                      │
│  2. 觀察進度條（顯示當前正在生成的文件）                      │
│     ├─> 生成 CRF...                                           │
│     ├─> 生成 DVP...                                           │
│     ├─> 生成 User Guide...                                    │
│     └─> 生成 DMP...                                           │
│  3. 等待所有文件生成完成                                      │
│  4. 確認顯示 ✅ 生成成功訊息                                  │
│  5. 在「下載生成的文件」區域點擊下載按鈕                      │
│  6. 檔案會下載到本地電腦                                      │
│                                                               │
│  生成的檔案格式: .docx (Microsoft Word)                       │
│  檔案命名: {Protocol編號}_{文件類型}.docx                     │
│                                                               │
│  ⏱️ 時間:                                                     │
│     • 單個文件: 30-60 秒                                      │
│     • 4 個文件: 2-4 分鐘                                      │
└─────────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────────┐
│                完成！                                         │
│                                                               │
│  ✅ 文件已生成並下載                                          │
│  ✅ 可以在 Word 中開啟和編輯                                  │
│  ✅ 建議由專業人員審核後再使用                                │
│                                                               │
│  下一步:                                                      │
│  • 在 Word 中開啟文件                                         │
│  • 審核內容的準確性                                           │
│  • 根據需要進行調整                                           │
│  • 套用公司樣式和格式                                         │
│  • 完成最終版本                                               │
└─────────────────────────────────────────────────────────────┘
```

---

## ⚡ 快速參考

### 總時間估計

| 操作流程 | 首次使用 | 後續使用 |
|---------|---------|---------|
| 設定 API Key | 1 分鐘 | 10 秒 |
| 上傳檔案 | 30 秒 | 20 秒 |
| 解析 Protocol | 60 秒 | 45 秒 |
| 編輯資訊（可選）| 5 分鐘 | 2 分鐘 |
| 選擇文件類型 | 10 秒 | 5 秒 |
| 生成文件（4個）| 4 分鐘 | 3 分鐘 |
| **總計** | **10-11 分鐘** | **5-6 分鐘** |

---

## 🎯 使用場景流程

### 場景 A: 快速生成單個 CRF

```
啟動 Web UI (3分) → 設定 API Key (1分) → 上傳 PDF (30秒)
    → 解析 (60秒) → 勾選 CRF → 生成 (60秒) → 下載

總時間: 約 7 分鐘（首次），約 3 分鐘（後續）
```

### 場景 B: 生成完整文件包

```
啟動 Web UI (3分) → 設定 API Key (1分) → 上傳 PDF + Logo (30秒)
    → 解析 (60秒) → 檢查並編輯資訊 (5分) → 勾選全部
    → 生成 (4分) → 下載全部

總時間: 約 14 分鐘（首次），約 8 分鐘（後續）
```

### 場景 C: 迭代更新

```
Web UI 已開啟 → 上傳新 PDF (30秒) → 解析 (60秒)
    → 修改特定欄位 (2分) → 勾選需要的文件
    → 生成 (2分) → 下載

總時間: 約 5-6 分鐘
```

---

## 💡 效率提升技巧

### 技巧 1: 保持 Web UI 開啟

- 不要關閉瀏覽器分頁
- 處理多個 Protocol 時重複使用

### 技巧 2: 預先準備檔案

- 提前準備好 PDF 和 Logo
- 確保 PDF 品質良好

### 技巧 3: 批次處理

- 一次勾選所有需要的文件類型
- 避免多次生成

### 技巧 4: 熟悉鍵盤快捷鍵

- Tab: 切換欄位
- Enter: 提交
- Ctrl+A: 全選（編輯器中）

---

## 🔄 重複使用流程

處理下一個 Protocol 時，只需從步驟 2 開始：

```
上傳新 PDF → 解析 → (編輯) → 選擇類型 → 生成 → 下載
```

**時間**: 約 4-6 分鐘

---

## 📱 多平台使用

### Colab（推薦用於）

- ✅ 快速測試
- ✅ 無本地環境
- ✅ 隨處訪問
- ⚠️ 會話有時間限制

### 本地環境（推薦用於）

- ✅ 長期使用
- ✅ 無網路中斷風險
- ✅ 更快的處理速度
- ⚠️ 需要安裝依賴

---

## 🆘 常見中斷點和解決方案

### 中斷點 1: API Key 設定失敗

**症狀**: 顯示 ❌ API Key 無效
**解決**:
1. 檢查 API Key 是否正確
2. 確認無多餘空格
3. 重新生成 API Key

### 中斷點 2: PDF 解析失敗

**症狀**: 顯示 ❌ 解析失敗
**解決**:
1. 確認 PDF 非掃描版
2. 檢查 PDF 未加密
3. 嘗試重新上傳

### 中斷點 3: JSON 格式錯誤

**症狀**: 顯示 ❌ JSON 格式錯誤
**解決**:
1. 檢查 JSON 語法（引號、逗號）
2. 使用 JSON 驗證工具
3. 重新解析 Protocol

### 中斷點 4: 生成失敗

**症狀**: 顯示 ❌ 生成失敗
**解決**:
1. 檢查 Protocol 資訊是否完整
2. 查看詳細錯誤訊息
3. 嘗試只生成一個文件類型

---

## 📊 檢查清單

使用前檢查：

- [ ] Web UI 已啟動
- [ ] API Key 已設定
- [ ] PDF 檔案已準備
- [ ] Logo 已準備（選填）

解析後檢查：

- [ ] 試驗標題正確
- [ ] Protocol 編號正確
- [ ] 訪視時程完整
- [ ] 終點指標準確
- [ ] 納排標準清楚

生成後檢查：

- [ ] 所有文件已下載
- [ ] 檔案可以開啟
- [ ] 內容基本正確
- [ ] 格式符合預期

---

**使用愉快！有任何問題請參考完整文檔。** 🎉
